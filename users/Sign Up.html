<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel ="stylesheet" href ="../style.css">
    <link rel="stylesheet" href="login.css">

</head>
<body>

<header>
    Sign Up
</header>

<div >
    <form id = "details" class="content">

        <label for="accountEmail"><b>Email</b></label>
        <input type="email" id="accountEmail" required name="email" class="input_signUp" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$">

        <label for="psw"><b>Password</b></label>
        <input type="password" id="psw" required class="input_signUp" required minlength="7" name="password" >

        <label for="name"><b>Name</b></label>
        <input type="text" id="name" required class="input_signUp" >

        <label for="phone"><b>Phone</b></label>
        <input type= "text" id="phone" required class="input_signUp" >

<!--        <label for="address"><b>Address</b></label>-->
<!--        <input type="text" id="address"  required class="input_signUp" pattern="[a-zA-Z0-9]" >-->

        <button type="submit" id="signUp">Sign Up</button>

        <div id="signInContainer">
            <br>

            <a href="Sign%20In.html" id="signInLink">Back To Sign In</a>

        </div>

    </form>
</div>


<script src="users.json"></script>

<script>

    // Fetch the users data from users.json
    fetch("users.json")
        .then(response => response.json())
        .then(data => {
            // Assign the retrieved data to the users variable
            const users = data;

            // Function to check if a user exists in the user list
            function userExists(email) {
                return users.some(user => user.email === email);
            }

            // Function to authenticate user
            function authenticateUser(email, password) {
                const user = users.find(user => user.email === email && user.password === password);
                return user !== undefined;
            }

            // Event listener for form submission!
            const signupForm = document.getElementById("details");
            signupForm.addEventListener("submit", function(event) {
                event.preventDefault(); // Prevent form submission for demonstration purposes

                const accountEmail = document.getElementById("accountEmail").value;
                const password = document.getElementById("psw").value;
                const name = document.getElementById("name").value;
                 localStorage.setItem("loggedInName", name);

                if (userExists(accountEmail)) {
                    alert("This User already exists! Please sign in!");
                } else {
                    // Create a new user object
                    const newUser = {
                        email: accountEmail,
                        password: password,
                        name: name
                    };



                    // Add the new user to the users array
                    users.push(newUser);

                    // Save the updated users array to local storage
                    localStorage.setItem("users", JSON.stringify(users));

                    // Redirect to home page or perform other actions as needed
                    window.location.href = "Sign%20In.html";
                }
            });
        })
        .catch(error => console.error("Error fetching users data:", error));
</script>

</body>
</html>
